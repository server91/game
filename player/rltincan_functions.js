/*!
 * ActivePresenter HTML5 Output File
 * Copyright (c) Atomi Systems, Inc. All rights reserved.
 * https://atomisystems.com/activepresenter/
 * Version: 8.5.7
 * Date: 2022.05.16
 */
!function(e){var t,n=e.ControlKind,a=e.ControlType,i=e.ResponseResult,r=e.PlayModes,c=e.logDebug,s=!1,o=0,u="http://adlnet.gov/expapi/verbs/completed",d="http://adlnet.gov/expapi/verbs/experienced",f="http://adlnet.gov/expapi/verbs/attempted",l="http://adlnet.gov/expapi/verbs/answered",v="http://adlnet.gov/expapi/verbs/passed",p="http://adlnet.gov/expapi/verbs/failed",h="suspend_data";function b(){return!!t||(c("Could not find API"),!1)}function k(e){var t,n;return e-=t=e%60,"PT"+((e-=n=e%3600)%3600!=0?0:e/3600)+"H"+(n%60!=0?0:n/60)+"M"+t+"S"}function S(e,t){var n={},a=t.ui.Is,i=a.Ms;switch(e){case u:n[i]=a.text("completed");break;case d:n[i]=a.text("experienced");break;case f:n[i]=a.text("attempted");break;case l:n[i]=a.text("answered");break;case v:n[i]=a.text("passed");break;case p:n[i]=a.text("failed");break;default:n[i]=a.text("voided")}return{id:e,display:n}}function m(e,n){if(!b())return"";var a;try{a=t.setState(e,n,{callback:function(){c("tincanSetStateData OK")}})}catch(e){c("tincanSetStateData failed - "+e.message)}return a}function w(e,t,n){var a=t;(void 0==a||a<0)&&(a=0);var r={},c={};switch(r.raw=a,e!=i.Ti&&(c.score=r),c.completion=!1,c.success=!1,c.response=n,e){case i.Ei:break;case i.Ti:case i.xi:c.completion=!0,c.success=!0;break;case i.Si:c.completion=!0,c.success=!1}return c}function g(e,t,i){switch(e){case n.S:return i?"long-fill-in":"fill-in";case n.I:return"matching";case n.L:switch(t){case a.nt:case a.it:case a.et:return"choice";case a.rt:return"sequencing";case a.ht:return"performance";case a.ot:return"matching";case a.ut:return"likert";default:return""}break;case n.B:case n.Y:default:return"performance"}return""}function x(e,t,i,r,c){var s,o,u,d="";switch(i){case n.S:u=c?4e3:250,(d=e.replace(/(\r\n|\n|\r)/gm," ")).length>u&&(d=d.substr(0,u));break;case n.I:d=e+"[.]"+t;break;case n.L:switch(r){case a.nt:case a.it:case a.et:case a.rt:for(d="",s=0,o=e.length||0;s<o;++s)""!=d&&(d+="[,]"),d+=e[s];break;case a.ht:case a.ot:var f,l=[];for(f in e)e.hasOwnProperty(f)&&l.push(f);for(l.sort(),d="",s=0,o=l.length;s<o;++s)""!=d&&(d+="[,]"),d+=l[s]+"[.]"+e[l[s]];break;case a.ut:d=(parseInt(e[t])+1).toString()}break;case n.B:case n.Y:var v,p=[];d="";for(v in e)e.hasOwnProperty(v)&&p.push(v);for(p.sort(),s=0,o=p.length;s<o;++s)""!=d&&(d+="[,]"),d+=p[s]+"[.]"+e[p[s]]}return d}var M=e.createClass({$init:function(e){this.Cs=e},initialize:function(){var e=this.Cs._s;try{t=new TinCan({url:window.location.href,recordStores:e.xAPIRecordStores,activity:{id:e.xAPICourseId,definition:{name:e.xAPICourseName,description:e.xAPICourseDescription}}}),c("tincanInitialize - successful.")}catch(e){return void c("tincanInitialize - failed: "+JSON.stringify(e))}0!==t.recordStores.length||c("tincanInitialize - failed: No LRS")},terminate:function(){if(0!=s){var e,n,a={verb:"",result:{}},i=this.Cs,o=(i._s.options,r[i.options.playMode]);if(o==r.Tutorial||o==r.Practice||o==r.Test){e=i.score(),n=i.maxScore(),a.verb=S(f,i);var u={};u.min=Math.round(0),u.scale=e/n,u.raw=e>0?Math.round(e):0,u.max=Math.round(n),a.result.score=u,a.result.duration=k(Math.ceil(i.elapsedTime()/1e3)),a.result.completion=!1}else a.verb=S(f,i),a.result.completion=!1,a.result.duration=k(Math.ceil(i.elapsedTime()/1e3));b()&&t.sendStatement(a,function(e,t){null===e[0].err?c("tincanTerminate - successful"):c("tincanTerminate - failed: "+e[0].err.responseText+" ("+e[0].err.status+")")})}},startLesson:function(){s||(s=!0,b()&&t.sendStatement({verb:S(f,this.Cs)},function(e,t){null===e[0].err?c("tincanStartLesson - successful"):c("tincanStartLesson - failed: "+e[0].err.responseText+" ("+e[0].err.status+")")}))},endLesson:function(e){if(0!=s){s=!1;var n,a,i,o={verb:"",result:{}},d=this.Cs,f=(d._s.options,r[d.options.playMode]);f==r.Tutorial||f==r.Practice||f==r.Test?(n=d.score(),a=d.maxScore(),i=d.result(),o.verb=S(i?v:p,d),score={},score.min=Math.round(0),score.scale=a>0?n/a:0,score.raw=n>0?Math.round(n):0,score.max=Math.round(a),o.result.score=score,o.result.success=i,o.result.duration=k(Math.ceil(d.elapsedTime()/1e3)),o.result.completion=!0):(o.verb=S(u,d),o.result.completion=!0,o.result.success=i,o.result.duration=k(Math.ceil(d.elapsedTime()/1e3))),b()&&t.sendStatement(o,function(e,t){null===e[0].err?c("tincanEndLesson - successful"):c("tincanEndLesson - failed: "+e[0].err.responseText+" ("+e[0].err.status+")")})}},loadSuspendData:function(){c("tincanLoadSuspendData");var e=function(e){if(!b())return"";var n="",a=t.getState(e);return null!==a.state&&(n=a.state.contents),n}(h);if(""!=e)try{var n=JSON.parse(e);n.info&&n.info instanceof Object&&(this.Cs.ks=n.info,o=n.info.ts||0)}catch(e){c("Invalid suspend data!")}},storeSuspendData:function(e,t){c("tincanStoreSuspendData");var n={};n.info=e;try{var a=JSON.stringify(n);m(h,a)}catch(e){c("Serialization suspend data error, session restore will not avaiable!")}o=e.ts||0},getSuspendDataTS:function(){return o},storeInteractionData:function(e,s,o,u,d){if(b()){var f=r[this.Cs.options.playMode],v=this.Cs.ui.Is.Ms;if(f==r.Tutorial||f==r.Practice||f==r.Test){var p,h,k,m,M,D=[];if(e.kind==n.L&&e.type==a.ut)for(k in u)u.hasOwnProperty(k)&&D.push(k);else k=e.reportid,D.push(k);for(m=0,M=D.length;m<M;++m){k=D[m];var y,I,L={},T=[],z=t.activity.id+"/"+k;if(s!=i.Ti)for(p=0;p<(d.length||0);++p)""!=(h=x(d[p],k,e.kind,e.type,e.multiline))&&T.push(h);L[v]=e.name,y={id:z,definition:{description:L,type:"http://adlnet.gov/expapi/activities/cmi.interaction",interactionType:g(e.kind,e.type,e.multiline),correctResponsesPattern:T}},I={verb:S(l,this.Cs),object:y,context:{contextActivities:{parent:t.activity}},result:w(s,o,x(u,k,e.kind,e.type,e.multiline))},t.sendStatement(I,function(e,t){null===e[0].err||c("storeInteractionData - failed: "+e[0].err.responseText+" ("+e[0].err.status+")")})}}this.storeSuspendData(this.Cs.ks)}},setBookmark:function(e,n,a){c("tincanSetBookmark");var i=e,r={},s={},o=this.Cs.ui.Is.Ms;if(""==i&&(i="Slide "+a),r[o]=e,s[o]=n,b())return t.sendStatement({verb:S(d,this.Cs),object:{id:t.activity.id+"/"+a,definition:{name:r,description:s}},context:{contextActivities:{parent:t.activity}}},function(e,t){null===e[0].err?c("tincanSetBookmark - sending statement success"):c("tincanSetBookmark - sending statement - err: "+e[0].err)}),m("bookmark",a)}});e.LMS=M}(window.AtomiAP=window.AtomiAP||{});